<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Advanced Search - Second Brain</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', path='/css/advanced-search.css') }}\">\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', path='/css/dashboard.css') }}\">\n</head>\n<body>\n    <!-- Navigation -->\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary\">\n        <div class=\"container-fluid\">\n            <a class=\"navbar-brand\" href=\"/dashboard\">üß† Second Brain</a>\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\n                <span class=\"navbar-toggler-icon\"></span>\n            </button>\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n                <ul class=\"navbar-nav ms-auto\">\n                    <li class=\"nav-item\">\n                        <a class=\"nav-link\" href=\"/dashboard\">üìä Dashboard</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a class=\"nav-link active\" href=\"/search\">üîç Search</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a class=\"nav-link\" href=\"/upload\">üì§ Upload</a>\n                    </li>\n                    <li class=\"nav-item\">\n                        <a class=\"nav-link\" href=\"/logout\">üö™ Logout</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"container-fluid py-4\">\n        <div class=\"search-container\">\n            <!-- Search Header -->\n            <div class=\"search-header\">\n                <div class=\"search-input-group\">\n                    <input type=\"text\" id=\"search-input\" class=\"search-input\" \n                           placeholder=\"Search your notes... (try 'machine learning' or #productivity)\">\n                    <button id=\"search-button\" class=\"search-button\">üîç Search</button>\n                    \n                    <!-- Search Suggestions -->\n                    <div id=\"search-suggestions\" class=\"search-suggestions\">\n                        <!-- Suggestions will be populated by JavaScript -->\n                    </div>\n                </div>\n                \n                <!-- Search Mode Controls -->\n                <div class=\"search-modes\">\n                    <button class=\"search-mode-btn active\" data-search-mode=\"hybrid\">\n                        ‚ö° Hybrid\n                    </button>\n                    <button class=\"search-mode-btn\" data-search-mode=\"fts\">\n                        üî§ Text\n                    </button>\n                    <button class=\"search-mode-btn\" data-search-mode=\"semantic\">\n                        üß† Semantic\n                    </button>\n                </div>\n                \n                <button id=\"advanced-toggle\" class=\"advanced-toggle\">\n                    Show Advanced Filters\n                </button>\n            </div>\n\n            <!-- Advanced Filters Panel -->\n            <div id=\"advanced-filters\" class=\"advanced-filters\">\n                <!-- Weight Controls (for hybrid search) -->\n                <div id=\"weight-controls\" class=\"filter-section\">\n                    <label class=\"filter-label\">Search Weight Balance</label>\n                    <div class=\"weight-controls\">\n                        <div class=\"weight-slider\">\n                            <span>üî§ Text</span>\n                            <input type=\"range\" id=\"fts-weight\" class=\"slider\" \n                                   min=\"0\" max=\"1\" step=\"0.1\" value=\"0.4\">\n                            <span id=\"fts-weight-display\" class=\"weight-display\">0.4</span>\n                        </div>\n                        <div class=\"weight-slider\">\n                            <span>üß† Semantic</span>\n                            <input type=\"range\" id=\"semantic-weight\" class=\"slider\" \n                                   min=\"0\" max=\"1\" step=\"0.1\" value=\"0.6\">\n                            <span id=\"semantic-weight-display\" class=\"weight-display\">0.6</span>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Date Range Filter -->\n                <div class=\"filter-section\">\n                    <label class=\"filter-label\">Date Range</label>\n                    <div class=\"filter-group\">\n                        <div class=\"date-inputs\">\n                            <label for=\"date-start\">From:</label>\n                            <input type=\"date\" id=\"date-start\" class=\"date-input\">\n                            <label for=\"date-end\">To:</label>\n                            <input type=\"date\" id=\"date-end\" class=\"date-input\">\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Tag Filter -->\n                <div class=\"filter-section\">\n                    <label class=\"filter-label\">Tags</label>\n                    <div class=\"filter-group\">\n                        <input type=\"text\" id=\"tag-filter\" class=\"tag-input\" \n                               placeholder=\"Add tag filter (press Enter)\">\n                        <div id=\"active-tag-filters\" class=\"active-tag-filters\">\n                            <!-- Active tag filters will appear here -->\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Type Filter -->\n                <div class=\"filter-section\">\n                    <label class=\"filter-label\">Note Types</label>\n                    <div class=\"checkbox-filters\">\n                        <label class=\"filter-checkbox\">\n                            <input type=\"checkbox\" data-type-filter=\"text\">\n                            üìù Text Notes\n                        </label>\n                        <label class=\"filter-checkbox\">\n                            <input type=\"checkbox\" data-type-filter=\"audio\">\n                            üéµ Audio\n                        </label>\n                        <label class=\"filter-checkbox\">\n                            <input type=\"checkbox\" data-type-filter=\"web\">\n                            üåê Web Content\n                        </label>\n                        <label class=\"filter-checkbox\">\n                            <input type=\"checkbox\" data-type-filter=\"book\">\n                            üìö Book Notes\n                        </label>\n                    </div>\n                </div>\n\n                <!-- Status Filter -->\n                <div class=\"filter-section\">\n                    <label class=\"filter-label\">Processing Status</label>\n                    <div class=\"checkbox-filters\">\n                        <label class=\"filter-checkbox\">\n                            <input type=\"checkbox\" data-status-filter=\"complete\">\n                            ‚úÖ Complete\n                        </label>\n                        <label class=\"filter-checkbox\">\n                            <input type=\"checkbox\" data-status-filter=\"pending\">\n                            ‚è≥ Pending\n                        </label>\n                        <label class=\"filter-checkbox\">\n                            <input type=\"checkbox\" data-status-filter=\"processing\">\n                            üîÑ Processing\n                        </label>\n                        <label class=\"filter-checkbox\">\n                            <input type=\"checkbox\" data-status-filter=\"failed\">\n                            ‚ùå Failed\n                        </label>\n                    </div>\n                </div>\n\n                <!-- Minimum Score Filter -->\n                <div class=\"filter-section\">\n                    <label class=\"filter-label\">Minimum Score</label>\n                    <div class=\"filter-group\">\n                        <input type=\"range\" id=\"min-score\" class=\"slider\" \n                               min=\"0\" max=\"1\" step=\"0.05\" value=\"0.1\">\n                        <span id=\"min-score-display\" class=\"weight-display\">0.10</span>\n                    </div>\n                </div>\n\n                <!-- Clear Filters -->\n                <div class=\"filter-section\">\n                    <button id=\"clear-filters\" class=\"clear-filters-btn\">\n                        üóëÔ∏è Clear All Filters\n                    </button>\n                </div>\n            </div>\n\n            <!-- Search Statistics -->\n            <div id=\"search-stats\" class=\"search-stats\" style=\"display: none;\">\n                <!-- Search analytics will appear here -->\n            </div>\n\n            <!-- Search Results -->\n            <div id=\"search-results\" class=\"search-results\">\n                <!-- Welcome message when no search performed -->\n                <div class=\"no-results\">\n                    <h3>üîç Advanced Search</h3>\n                    <p>Enter a search query to find your notes using powerful hybrid search combining text matching and semantic similarity.</p>\n                    <div class=\"search-tips\">\n                        <h4>Search Tips:</h4>\n                        <ul>\n                            <li><strong>Basic search:</strong> Enter any text to find matching notes</li>\n                            <li><strong>Tag search:</strong> Use #tag to find notes with specific tags</li>\n                            <li><strong>Semantic search:</strong> Use natural language to find conceptually similar content</li>\n                            <li><strong>Hybrid search:</strong> Combines text matching with semantic understanding</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Search Help Modal -->\n    <div class=\"modal fade\" id=\"searchHelpModal\" tabindex=\"-1\">\n        <div class=\"modal-dialog modal-lg\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\">üîç Search Help</h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                </div>\n                <div class=\"modal-body\">\n                    <h6>Search Modes</h6>\n                    <ul>\n                        <li><strong>‚ö° Hybrid:</strong> Combines text matching with semantic similarity for best results</li>\n                        <li><strong>üî§ Text:</strong> Traditional full-text search with exact word matching</li>\n                        <li><strong>üß† Semantic:</strong> AI-powered search that understands meaning and context</li>\n                    </ul>\n                    \n                    <h6>Advanced Filters</h6>\n                    <ul>\n                        <li><strong>Weight Balance:</strong> Adjust the importance of text vs semantic matching</li>\n                        <li><strong>Date Range:</strong> Filter notes by creation or modification date</li>\n                        <li><strong>Tags:</strong> Filter by specific tags (use # prefix)</li>\n                        <li><strong>Note Types:</strong> Filter by content type (text, audio, web, etc.)</li>\n                        <li><strong>Processing Status:</strong> Filter by processing status</li>\n                        <li><strong>Minimum Score:</strong> Set threshold for result relevance</li>\n                    </ul>\n                    \n                    <h6>Search Operators</h6>\n                    <ul>\n                        <li><strong>#tag:</strong> Find notes with specific tags</li>\n                        <li><strong>\"exact phrase\":</strong> Search for exact word sequences</li>\n                        <li><strong>concept:</strong> Use natural language for semantic search</li>\n                    </ul>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Help Button -->\n    <button type=\"button\" class=\"btn btn-info position-fixed\" \n            style=\"bottom: 20px; right: 20px; z-index: 1000;\" \n            data-bs-toggle=\"modal\" data-bs-target=\"#searchHelpModal\">\n        ‚ùì Help\n    </button>\n\n    <!-- Scripts -->\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script src=\"{{ url_for('static', path='/js/advanced-search.js') }}\"></script>\n</body>\n</html>