{% extends "base.html" %}

{% block title %}New Build Log Session{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="mb-6">
        <a href="/build-logs" class="inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Back to Build Logs
        </a>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8">
        <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
            ➕ New Build Log Session
        </h1>

        <form action="/build-logs/create" method="post" class="space-y-6">
            <!-- Task Description -->
            <div>
                <label for="task_description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Task Description *
                </label>
                <input type="text"
                       id="task_description"
                       name="task_description"
                       required
                       placeholder="e.g., Implement user authentication system"
                       class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500">
            </div>

            <!-- Duration -->
            <div>
                <label for="duration_minutes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Duration (minutes)
                </label>
                <input type="number"
                       id="duration_minutes"
                       name="duration_minutes"
                       placeholder="e.g., 120"
                       class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500">
            </div>

            <!-- Conversation Log -->
            <div>
                <label for="conversation_log" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Conversation Log *
                </label>
                <textarea id="conversation_log"
                          name="conversation_log"
                          required
                          rows="10"
                          placeholder="Paste your full conversation here..."
                          class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white font-mono text-sm focus:ring-2 focus:ring-blue-500"></textarea>
            </div>

            <!-- Files Changed -->
            <div>
                <label for="files_changed" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Files Changed (one per line)
                </label>
                <textarea id="files_changed"
                          name="files_changed"
                          rows="5"
                          placeholder="Created: services/auth_service.py&#10;Modified: app.py&#10;Created: templates/login.html"
                          class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white font-mono text-sm focus:ring-2 focus:ring-blue-500"></textarea>
            </div>

            <!-- Commands Executed -->
            <div>
                <label for="commands_executed" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Commands Executed (one per line)
                </label>
                <textarea id="commands_executed"
                          name="commands_executed"
                          rows="5"
                          placeholder="pytest tests/&#10;git add .&#10;git commit -m 'feat: Add authentication'&#10;git push"
                          class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white font-mono text-sm focus:ring-2 focus:ring-blue-500"></textarea>
            </div>

            <!-- Success Status -->
            <div class="flex items-center">
                <input type="checkbox"
                       id="success"
                       name="success"
                       value="true"
                       class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                <label for="success" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">
                    Task completed successfully
                </label>
            </div>

            <!-- Deliverables -->
            <div>
                <label for="deliverables" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Deliverables (one per line)
                </label>
                <textarea id="deliverables"
                          name="deliverables"
                          rows="4"
                          placeholder="User authentication working&#10;Tests passing&#10;Documentation updated"
                          class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"></textarea>
            </div>

            <!-- Next Steps -->
            <div>
                <label for="next_steps" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Next Steps (one per line)
                </label>
                <textarea id="next_steps"
                          name="next_steps"
                          rows="4"
                          placeholder="Add password reset functionality&#10;Implement two-factor authentication&#10;Write integration tests"
                          class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"></textarea>
            </div>

            <!-- Submit Button -->
            <div class="flex gap-3">
                <button type="submit"
                        class="flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium">
                    ✅ Save Build Log
                </button>
                <a href="/build-logs"
                   class="px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition font-medium text-center">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
